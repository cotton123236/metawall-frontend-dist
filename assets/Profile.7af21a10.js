import{u as y,r as P,C as p,a as c,c as n,b as t,f as e,j as h,t as f,n as I,F as B,e as F,I as S,J as b,K as x}from"./index.d7c42a5f.js";import{_ as U}from"./Posts.b295fa16.js";import{_ as C,u as L,k as N,l as j,b as O,d as V,m as z}from"./plugin-vue_export-helper.31185ba2.js";const v=i=>(S("data-v-373c32f2"),i=i(),b(),i),D={class:"profile","data-aos":"clip-left","data-aos-duration":"1000"},E={class:"headshot"},J=["src"],K={class:"content"},R={class:"head"},T={class:"name"},$=v(()=>t("div",{class:"created"},"2022/04/04 \u52A0\u5165\u5143\u5B87\u5B99",-1)),q={class:"detail"},A=v(()=>t("span",null,"5 \u4EBA\u8FFD\u8E64\u4E2D",-1)),G={class:"post-content"},H={key:1,class:"no-post"},M={setup(i){const _=L(),g=y(),{patchUser:m}=_,o=P(!1),{id:a}=g.params,r=p({_id:"",nickName:"",avatar:"",follows:[],likes:[]});(async()=>{const{data:s}=await N(a);console.log(s),s.status==="success"&&Object.assign(r,s.data)})();const d=p([]);(async()=>{const{data:s}=await j(a);console.log(s),s.status==="success"&&Object.assign(d,s.data.list)})(),(async()=>{const s=[],{data:l}=await O();if(l.status==="success"&&l.data.length!==0){for(let u of l.data.list)s.push(u.following[0]._id),s.findIndex(k=>k==a)>=0&&(o.value=!0);m({follows:l.data.list})}})();const w=async()=>{if(a!==_._id)if(o.value){const{data:s}=await V(a);if(s.status!=="success")return;o.value=!1}else{const{data:s}=await z(a);if(console.log("data",s),s.status!=="success")return;o.value=!0}};return(s,l)=>(c(),n("section",null,[t("div",D,[t("div",E,[e(r).avatar?(c(),n("img",{key:0,src:e(r).avatar,alt:""},null,8,J)):h("",!0)]),t("div",K,[t("div",R,[t("span",T,f(e(r).nickName),1),e(_)._id!==e(a)?(c(),n("div",{key:0,class:I(["follow-btn",o.value?"unfollow":"follow"]),onClick:w},f(o.value?"\u53D6\u6D88\u8FFD\u8E64":"\u8FFD\u8E64"),3)):h("",!0)]),$,t("div",q,[t("span",null,f(e(d).length)+" \u5247\u8CBC\u6587",1),A])])]),t("div",G,[e(d).length?(c(!0),n(B,{key:0},F(e(d),u=>(c(),x(U,{key:u._id,post:u},null,8,["post"]))),128)):(c(),n("div",H," \u76EE\u524D\u5C1A\u7121\u52D5\u614B\uFF0C\u8A66\u8457\u65B0\u589E\u4E00\u5247\u52D5\u614B\u5427\uFF01 "))])]))}};var ts=C(M,[["__scopeId","data-v-373c32f2"]]);export{ts as default};
