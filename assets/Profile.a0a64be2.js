import{u as m,r as y,B as _,a as o,c as i,b as t,f as l,i as k,t as f,n as P,F as b,e as B,H as F,I,J as S}from"./index.198dde65.js";import{_ as U}from"./Posts.d57e69d9.js";import{_ as x,u as N,j,k as C,b as L,d as O,l as V}from"./plugin-vue_export-helper.7637a18b.js";const p=c=>(F("data-v-325b68ab"),c=c(),I(),c),z={class:"profile"},D={class:"headshot"},E=["src"],H={class:"content"},J={class:"head"},R={class:"name"},T=p(()=>t("div",{class:"created"},"2022/04/04 \u52A0\u5165\u5143\u5B87\u5B99",-1)),$=p(()=>t("div",{class:"detail"},[t("span",null,"10 \u5247\u8CBC\u6587"),t("span",null,"5 \u4EBA\u8FFD\u8E64\u4E2D")],-1)),q={class:"post-content"},A={key:1,class:"no-post"},G={setup(c){const v=N(),g=m(),{patchUser:h}=v,e=y(!1),{id:a}=g.params,n=_({_id:"",nickName:"",avatar:"",follows:[],likes:[]});(async()=>{const{data:s}=await j(a);console.log(s),s.status==="success"&&Object.assign(n,s.data)})();const d=_([]);(async()=>{const{data:s}=await C(a);console.log(s),s.status==="success"&&Object.assign(d,s.data.list)})(),(async()=>{const{data:s}=await L();if(s.status==="success"&&s.data.length!==0){for(let u of s.data.list)for(let r of u.following)r._id===a?e.value=!0:e.value=!1;h({follows:s.data.list})}})();const w=async()=>{if(e.value){const{data:s}=await O(a);if(s.status!=="success")return;e.value=!1}else{const{data:s}=await V(a);if(console.log("data",s),s.status!=="success")return;e.value=!0}};return(s,u)=>(o(),i("section",null,[t("div",z,[t("div",D,[l(n).avatar?(o(),i("img",{key:0,src:l(n).avatar,alt:""},null,8,E)):k("",!0)]),t("div",H,[t("div",J,[t("span",R,f(l(n).nickName),1),t("div",{class:P(["follow-btn",e.value?"unfollow":"follow"]),onClick:w},f(e.value?"\u53D6\u6D88\u8FFD\u8E64":"\u8FFD\u8E64"),3)]),T,$])]),t("div",q,[l(d).length?(o(!0),i(b,{key:0},B(l(d),r=>(o(),S(U,{key:r._id,post:r},null,8,["post"]))),128)):(o(),i("div",A," \u76EE\u524D\u5C1A\u7121\u52D5\u614B\uFF0C\u8A66\u8457\u65B0\u589E\u4E00\u5247\u52D5\u614B\u5427\uFF01 "))])]))}};var Z=x(G,[["__scopeId","data-v-325b68ab"]]);export{Z as default};
