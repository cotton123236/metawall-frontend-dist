import{_ as y,u as P,r as I,D as p,a as l,c as i,b as t,f as e,j as h,t as f,n as b,F as B,e as F,J as S,K as x,L}from"./index.521ebd07.js";import{_ as U}from"./Posts.9376ed42.js";import{u as N,r as j,s as C,c as D,d as O,t as V}from"./userStore.ccc65ad6.js";const v=r=>(S("data-v-4b7497be"),r=r(),x(),r),z={class:"profile","data-aos":"clip-left","data-aos-duration":"1000"},E={class:"headshot"},J=["src"],K={class:"content"},R={class:"head"},T={class:"name"},$=v(()=>t("div",{class:"created"},"2022/04/04 \u52A0\u5165\u5143\u5B87\u5B99",-1)),q={class:"detail"},A=v(()=>t("span",null,"5 \u4EBA\u8FFD\u8E64\u4E2D",-1)),G={class:"post-content"},H={key:1,class:"no-post"},M={setup(r){const o=N(),g=P(),{patchUser:w}=o,c=I(!1);o._id;const{id:a}=g.params,d=p({_id:"",nickName:"",avatar:"",follows:[],likes:[]});(async()=>{const{data:s}=await j(a);console.log(s),s.status==="success"&&Object.assign(d,s.data)})();const u=p([]);(async()=>{const{data:s}=await C(a);console.log(s),s.status==="success"&&Object.assign(u,s.data.list)})(),(async()=>{const s=[];if(!o._id)return;const{data:n}=await D(o._id);if(n.status==="success"&&n.data.length!==0){for(let _ of n.data.list)s.push(_.following[0]._id),s.findIndex(k=>k==a)>=0&&(c.value=!0);w({follows:n.data.list})}})();const m=async()=>{if(a!==o._id)if(c.value){const{data:s}=await O(a);if(s.status!=="success")return;c.value=!1}else{const{data:s}=await V(a);if(console.log("data",s),s.status!=="success")return;c.value=!0}};return(s,n)=>(l(),i("section",null,[t("div",z,[t("div",E,[e(d).avatar?(l(),i("img",{key:0,src:e(d).avatar,alt:""},null,8,J)):h("",!0)]),t("div",K,[t("div",R,[t("span",T,f(e(d).nickName),1),e(o)._id!==e(a)?(l(),i("div",{key:0,class:b(["follow-btn",c.value?"unfollow":"follow"]),onClick:m},f(c.value?"\u53D6\u6D88\u8FFD\u8E64":"\u8FFD\u8E64"),3)):h("",!0)]),$,t("div",q,[t("span",null,f(e(u).length)+" \u5247\u8CBC\u6587",1),A])])]),t("div",G,[e(u).length?(l(!0),i(B,{key:0},F(e(u),_=>(l(),L(U,{key:_._id,post:_},null,8,["post"]))),128)):(l(),i("div",H," \u76EE\u524D\u5C1A\u7121\u52D5\u614B\uFF0C\u8A66\u8457\u65B0\u589E\u4E00\u5247\u52D5\u614B\u5427\uFF01 "))])]))}};var ts=y(M,[["__scopeId","data-v-4b7497be"]]);export{ts as default};
