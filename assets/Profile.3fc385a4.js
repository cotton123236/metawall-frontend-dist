import{_ as y,u as P,r as I,D as p,a as c,c as n,b as t,f as e,j as h,t as f,n as B,F,e as S,J as b,K as x,L}from"./index.616eeb2e.js";import{_ as U}from"./Posts.720a137e.js";import{u as N,o as j,q as C,b as D,d as O,r as V}from"./userStore.88f26cf3.js";const v=i=>(b("data-v-86a23e76"),i=i(),x(),i),q={class:"profile","data-aos":"clip-left","data-aos-duration":"1000"},z={class:"headshot"},E=["src"],J={class:"content"},K={class:"head"},R={class:"name"},T=v(()=>t("div",{class:"created"},"2022/04/04 \u52A0\u5165\u5143\u5B87\u5B99",-1)),$={class:"detail"},A=v(()=>t("span",null,"5 \u4EBA\u8FFD\u8E64\u4E2D",-1)),G={class:"post-content"},H={key:1,class:"no-post"},M={setup(i){const r=N(),g=P(),{patchUser:w}=r,o=I(!1),{id:a}=g.params,d=p({_id:"",nickName:"",avatar:"",follows:[],likes:[]});(async()=>{const{data:s}=await j(a);console.log(s),s.status==="success"&&Object.assign(d,s.data)})();const u=p([]);(async()=>{const{data:s}=await C(a);console.log(s),s.status==="success"&&Object.assign(u,s.data.list)})(),(async()=>{const s=[],{data:l}=await D(r._id);if(l.status==="success"&&l.data.length!==0){for(let _ of l.data.list)s.push(_.following[0]._id),s.findIndex(k=>k==a)>=0&&(o.value=!0);w({follows:l.data.list})}})();const m=async()=>{if(a!==r._id)if(o.value){const{data:s}=await O(a);if(s.status!=="success")return;o.value=!1}else{const{data:s}=await V(a);if(console.log("data",s),s.status!=="success")return;o.value=!0}};return(s,l)=>(c(),n("section",null,[t("div",q,[t("div",z,[e(d).avatar?(c(),n("img",{key:0,src:e(d).avatar,alt:""},null,8,E)):h("",!0)]),t("div",J,[t("div",K,[t("span",R,f(e(d).nickName),1),e(r)._id!==e(a)?(c(),n("div",{key:0,class:B(["follow-btn",o.value?"unfollow":"follow"]),onClick:m},f(o.value?"\u53D6\u6D88\u8FFD\u8E64":"\u8FFD\u8E64"),3)):h("",!0)]),T,t("div",$,[t("span",null,f(e(u).length)+" \u5247\u8CBC\u6587",1),A])])]),t("div",G,[e(u).length?(c(!0),n(F,{key:0},S(e(u),_=>(c(),L(U,{key:_._id,post:_},null,8,["post"]))),128)):(c(),n("div",H," \u76EE\u524D\u5C1A\u7121\u52D5\u614B\uFF0C\u8A66\u8457\u65B0\u589E\u4E00\u5247\u52D5\u614B\u5427\uFF01 "))])]))}};var ts=y(M,[["__scopeId","data-v-86a23e76"]]);export{ts as default};
